<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TID Challenge</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script src="https://unpkg.com/html5-qrcode"></script>
  <script defer src="script.js"></script>
</head>
<body>
  <!-- Landing Screen -->
  <div id="landing-screen" class="screen active">
    <img src="tid-logo.png" alt="TID Challenge Logo" class="logo" />
    <h1>Welcome to the TID Challenge!</h1>
    <p>Use your metal detector to guess what‚Äôs inside the box by scanning its QR code.</p>
    <input type="text" id="playerName" placeholder="Enter your name" />
    <select id="detectorModel">
      <option value="">Select your detector</option>
      <option value="equinox_600_800">Equinox 600/800</option>
      <option value="equinox_700_900">Equinox 700/900</option>
      <option value="manticore">Manticore</option>
      <option value="xp_orx">XP ORX</option>
      <option value="xp_deus_ii">XP Deus II</option>
    </select>
    <button onclick="startWithName()">Start</button>
  </div>

  <!-- Start Screen -->
  <div id="start-screen" class="screen hidden">
    <h2>Scan a QR Code or Enter Box ID</h2>
    <div id="qr-reader" style="width:300px; margin:auto;"></div>
    <input type="text" id="boxIdInput" placeholder="Enter Box ID" />
    <button onclick="startChallenge()">Start</button>
    <button onclick="showLeaderboard()">Leaderboard</button>
  </div>

  <!-- Guessing Screen -->
  <div id="guess-screen" class="screen hidden">
    <h2>What‚Äôs in the Box?</h2>
    <div id="choices"></div>
    <div id="hint-buttons" class="hidden">
      <button onclick="showHint(1)" class="hidden">Show Hint 1</button>
      <button onclick="showHint(2)" class="hidden">Show Hint 2</button>
      <button onclick="showTID()" class="hidden">Show TID Hint</button>
    </div>
    <div id="hint-container" class="hidden">
      <video id="hintVideo" width="300" controls></video>
    </div>
  </div>

  <!-- Detector Model Screen (deprecated) -->
  <div id="model-screen" class="screen hidden">
    <h3>Select Your Detector</h3>
    <div id="modelChoices">
      <button onclick="showTID('equinox_600_800')">Equinox 600/800</button>
      <button onclick="showTID('equinox_700_900')">Equinox 700/900</button>
      <button onclick="showTID('manticore')">Manticore</button>
      <button onclick="showTID('xp_orx')">XP ORX</button>
      <button onclick="showTID('xp_deus_ii')">XP Deus II</button>
    </div>
    <div id="tidResult"></div>
    <button onclick="showScreen('guess-screen')">Back</button>
  </div>

  <!-- Success Screen -->
  <div id="success-screen" class="screen hidden">
    <h2>üéâ Correct!</h2>
    <img id="itemImage" src="" alt="Item" />
    <p id="itemDescription"></p>
    <button onclick="showLeaderboard()">Leaderboard</button>
    <button onclick="showScreen('start-screen')">Home</button>
  </div>

  <!-- Leaderboard Screen -->
  <div id="leaderboard-screen" class="screen hidden">
    <h2>üèÜ Leaderboard</h2>
    <ul id="leaderboardList"></ul>
    <button onclick="showScreen('start-screen')">Home</button>
  </div>

  <!-- Audio -->
  <audio id="correctSound" src="correct.mp3" preload="auto"></audio>
  <audio id="wrongSound" src="wrong.mp3" preload="auto"></audio>
</body>
</html>
